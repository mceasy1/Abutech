(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[6371],{

/***/ 326908:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(411921);__web_req__(34082);__web_req__(639679);__web_req__(36315);__web_req__(995355);self._5f4c02f84e2a9f743c446a5c779372bb = self._5f4c02f84e2a9f743c446a5c779372bb || {};(function(__c) {"use strict";var l=__c.l,oa=__c.oa,lJ=__c.lJ;var Udn=function(a){switch(a){case 2:return new Set([1,3]);case 1:return new Set([2,3]);default:throw new __c.t(a);}},Vdn=function(a){return null!=a.Hc&&2===a.Hc.type&&null!=a.Hc.Ig},Wdn=function(a){return null!=a.Hc&&4===a.Hc.type&&null!=a.Hc.hY},Zdn=function(a,b,c){var d,e;const f=null!==(e=null===(d=a.Hc)||void 0===d?void 0:d.Xt.filter(Xdn))&&void 0!==e?e:[];switch(b){case 2:return 0<f.length&&!!a.Hc.kuc;case 1:return f.map(Ydn).includes(c.Ne.kb);default:throw new __c.t(b);}},Ydn=
function(a){switch(a){case"paid_monthly_oct2015":return 2;case"paid_yearly_oct2015":return 3;default:throw new __c.t(a);}},Xdn=function(a){return"paid_yearly_oct2015"===a||"paid_monthly_oct2015"===a},$dn=function(a,b){let c;switch(a.type){case 2:c=1;var d=l(a.ic);break;case 1:c=l(a.ic);d=1;break;case 4:c=l(a.LG);d=l(a.ic);break;default:throw Error(`Offer type ${a.type} is not supported`);}a={kb:l(a.kb),ic:d};if(a.kb!==b.kb)return!1;d=__c.Lv(a,b);return 1>d||!Number.isInteger(d)?
!1:c*a.ic>=b.ic},aen=function(a,b){const c=Udn(b);return a.filter((d)=>c.has(d.Ne.PO))},cen=function(a,b){a=__c.Dd(a,(c)=>c.Fc);return Array.from(a.values()).flatMap((c)=>ben(c,b))},ben=function(a,b){function c(g){return g.map((h)=>{const k=a.find((n)=>n.Ne.kb===h.kb&&n.Ne.ic===h.ic);if(k){var m=k.Opa.filter((n)=>$dn(n.Wf,h));return new __c.XTf(Object.assign({},k,{Opa:m}))}}).filter(__c.Ra)}b=b?b:__c.Qe(a.map((g)=>g.Ne),(g)=>`${g.kb}:${g.ic}`).filter((g)=>1!==g.kb);b=c(b);var d=a[0].Opa||[];const e=new Set(b.flatMap((g)=>
g.Opa.map((h)=>h.Wf.id)));d=d.filter((g)=>!e.has(g.Wf.id));let f=[];0<d.length&&(d=d.map((g)=>({kb:l(g.Wf.kb),ic:l(g.Wf.ic)})),f=c(d));return[...b,...f]},den,x8;
__c.to.prototype.lwd=__c.jv(512,async function(a){const b=__c.id([__c.Ku,"plans","priceconfigs"]);__c.cd(b,{plans:a.Xt,offers:a.offers,preferredCurrency:l(a.ZI,"FindPlanPriceConfigsRequest#preferredCurrency required"),quantity:l(a.quantity,"FindPlanPriceConfigsRequest#quantity required"),subscriberType:__c.nx.serialize(a.Vy)});a=__c.ld(b);const[c,{g2g:d}]=await Promise.all([this.Ia.get(a),__webpack_require__.me(327788).then(()=>({g2g:__c.f7f}))]);return d.deserialize(c)});
den=class{constructor(a,b,c){this.Ec=a;this.Wc=b;this.xX=c;this.Og=1}WDb(a){return 0<a.length&&a.every((b)=>__c.p0a.includes(b))}async mja(a){function b(u){let v=aen(n,u);2===u&&(v=cen(v,a.kwb));return v.filter(__c.a1f).flatMap((w)=>{const x=l(q.find((G)=>G.id===w.Fc),`Could not find plan for ${w.Fc}`),A=1===u||2===w.Ne.kb&&1===w.Ne.ic,B=!p||!Vdn(p)||Zdn(p,u,w),E=r.Qua&&A&&B;return[...w.Opa.map((G)=>new x8(u,x,w,G,p&&Wdn(p)&&p.Hc.hY===G.Wf.id?p:void 0,E?r:void 0)),...(E?[new x8(u,x,w,void 0,p&&Vdn(p)?
p:void 0,r)]:[]),new x8(u,x,w,void 0,void 0,void 0)]})}var c=a.od,d=a.ZI;const e=a.Xt,f=a.brand,g=a.user,h=a.Gl;oa(1<=e.length,"At least one plan must be defined");const k=a.offers;d=await Promise.all([a.qFb&&null!=f&&null!=g?this.Wc.Anb(new __c.Y4e({body:new __c.Z4e({brand:f,user:g,Fc:e[0]})})):void 0,this.lwd({offers:k,brand:f,Gl:h,Xt:e,ZI:d}),__c.XRf(this.Wc,e)]);const[m,{W5:n,svh:p},q]=d;let r=new __c.LTf({Qua:!1,TO:0});null==f&&null==g?r=new __c.LTf({Qua:!0,TO:0}):(null===m||void 0===m?
0:m.NK.Qua)?r=null===m||void 0===m?void 0:m.NK:p&&Vdn(p)&&(r=new __c.LTf({Qua:!0,TO:0}));c=(null==c?[1,2]:[c]).flatMap((u)=>b(u));return{Ue:__c.cSf(c)}}async lwd(a){var{brand:b,Xt:c,ZI:d,offers:e,Gl:f}=a,g;const[h,k]=await Promise.all([null==f&&null!=e&&0<e.length&&null!=b?this.Wc.cub(new __c.m2f({brand:b,Wd:e,Og:1})):void 0,"string"===typeof f?this.Ec.NPb(new __c.w9f({code:f,validate:!0})).catch((m)=>{throw new lJ(100,m)}):void 0]);a=null!==(g=null===k||void 0===k?void 0:k.Gl)&&void 0!==g?g:"object"===
typeof f?f:void 0;if(null!=f){if(null==a)throw new lJ(100);if(!Vdn(a)&&!Wdn(a))throw new lJ(101);if(a.TO>a.pka)throw new lJ(103);if(a.CRd&&a.CRd!==b)throw new lJ(103)}g=null!=a&&Wdn(a)?[a.Hc.hY]:null!=h?h.offers.map((m)=>m.id):[];g=(await this.Wc.ieb(new __c.qrf({Xt:c,ZI:null!==d&&void 0!==d?d:"USD",Vy:1,quantity:1,offers:0<g.length?g:void 0}))).W5.filter(__c.a1f);if(a&&Wdn(a)){const m=a.Hc.hY;g=g.filter((n)=>n.Opa.some((p)=>p.Wf.id===m));if(0===g.length)throw new lJ(104)}oa(null==
a||Vdn(a)||Wdn(a));return{svh:a,W5:g}}async bO(a){const{brand:b,user:c,quantity:d,Oe:e,Sab:f,Oe:{od:g,Jd:h,Wm:k,im:m,Jd:{interval:{kb:n,ic:p}}},billingAddress:q}=a;__c.la(e instanceof x8);({Wt:{Ne:a}}=e);const r=null!=m,u=__c.bN(h.Oh,d);if(null!=this.xX){var v=await this.xX.bvb(new __c.gYb);v=null!=v.OO&&0<v.OO.length?v.OO:void 0}return await this.Wc.bO(new __c.nN({body:new __c.tSb({brand:b,currency:u.currency,lL:u.value,interval:n,ic:p,quantity:d,tF:!0,user:2===a.Vy?c:void 0,n3b:r,hnc:2===g,Fc:a.Fc,
Gl:2===(null===k||void 0===k?void 0:k.zx)?k.Gl:null===m||void 0===m?void 0:m.Gl,Wf:1===(null===k||void 0===k?void 0:k.zx)?k.Wf:void 0,Ij:v,Sab:f,billingAddress:q})}))}};
x8=class{constructor(a,b,c,d,e,f){var g,h,k;this.od=a;this.vVa=b;this.Wt=c;this.Npa=d;this.Gl=e;this.Og=1;this.productId=void 0;this.Fc=c.Fc;this.descriptor=c.descriptor;this.Wn=__c.BI({Jd:b});b=Udn(a);oa(b.has(c.Ne.PO),`Cannot create subscriptionType ${a} PlanOption with paymentConfigType (${c.Ne.PO}) PlanPriceGroup`);oa(null==e||Vdn(e)||Wdn(e));b=x8.w$b(a,c,void 0);this.Jd={interval:{kb:c.Ne.kb,ic:c.Ne.ic},Oh:b,Rz:c.Ne.Rz};this.im=this.Wm=void 0;null!=d&&(__c.la(null==e||Wdn(e)),this.Wm=
x8.Gne({od:a,Npa:d,Wt:c,Gl:e}));a=null!=e&&Vdn(e)?e:void 0;null!=d&&!d.Wf.xZa||(null===f||void 0===f||!f.Qua)&&null==a||(c=null!==(g=null===a||void 0===a?void 0:a.Hc.Ig)&&void 0!==g?g:c.Ig,this.im={Gl:null===a||void 0===a?void 0:a.code,interval:{kb:1,ic:c},TO:null!==(h=null===f||void 0===f?void 0:f.TO)&&void 0!==h?h:0,CJb:null!==(k=null===a||void 0===a?void 0:a.Hc.kuc)&&void 0!==k?k:!1,g4c:{author:1,Bea:3}})}static Gne(a){var{od:b,Gl:c,Npa:d,Wt:e}=a;__c.la(null==c||c.Hc.hY===d.Wf.id);__c.la(1===
b||$dn(d.Wf,e.Ne),`Offer cannot be created with plan config. offerId: ${d.Wf.id};`+` plan config: ${e.Ne.kb}-${e.Ne.ic}`);a=(a=null===c||void 0===c?void 0:c.code)?{zx:2,Gl:a}:{zx:1,Wf:d.Wf.id};switch(d.Wf.type){case 2:case 4:return Object.assign({},a,{interval:{kb:l(d.Wf.kb),ic:l(d.Wf.ic)},LG:d.Wf.LG||1,method:null!=d.Wf.percentage?1:2,uUb:d.Wf.percentage,Oh:x8.w$b(b,e,d),TO:0,Rz:e.Ne.Rz});case 1:return Object.assign({},a,{interval:{kb:l(d.Wf.kb),ic:1},LG:l(d.Wf.ic),method:null!=d.Wf.percentage?
1:2,uUb:d.Wf.percentage,Oh:x8.w$b(b,e,d),TO:0,Rz:e.Ne.Rz});default:throw Error("Method not implemented.");}}static w$b(a,b,c){function d(h){var k;if(!c)return h;const m=c.Wf,n=1-.01*(null!==(k=c.Wf.percentage)&&void 0!==k?k:0);if(2===a){switch(m.type){case 4:k=l(m.LG);break;case 2:k=1;break;case 1:k=l(b.Ne.ic);break;default:throw Error(`Offer type ${m.type} is not supported`);}return __c.ZVf(h/k*n)*k}return __c.ZVf(h*n)}var e,f=null!==(e=null===c||void 0===c?void 0:c.Ne)&&void 0!==e?e:b.Ne;
const g=f.currency;if(1!==a||2!==(null===c||void 0===c?void 0:c.Wf.type)&&4!==(null===c||void 0===c?void 0:c.Wf.type))f=f.Hr;else{e={kb:l(c.Wf.kb),ic:l(c.Wf.ic)};const h=__c.Lv(f,e);f=f.Hr.map((k)=>new __c.fN(Object.assign({},k,{xW:k.xW&&k.xW*h,t$:k.t$&&k.t$*h})))}return f.map((h)=>2===h.Yka?(oa(null!=h.t$),{currency:g,type:1,range:{lowerBound:l(h.pN),upperBound:h.ST},EAf:d(h.xW),B5i:d(h.t$)}):{currency:g,type:2,range:{lowerBound:l(h.pN),upperBound:h.ST},value:d(h.xW)})}};
__c.q0a={};__c.q0a.jgj=x8;__c.q0a.Igh=den;__c.q0a.fKj=$dn;}).call(self, self._5f4c02f84e2a9f743c446a5c779372bb);}

}])
//# sourceMappingURL=sourcemaps/d1011e72bc3f9db5.js.map